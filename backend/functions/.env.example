# ============================================================================
# ENVIRONMENT VARIABLES TEMPLATE
# Social Finance Impact Platform - Firebase Functions
# ============================================================================
# 
# Copy this file to .env and fill in your actual values
# NEVER commit .env files to version control
# All values shown here are examples - replace with your actual keys
#

# ============================================================================
# FIREBASE CONFIGURATION
# ============================================================================

# Firebase Project Configuration
FIREBASE_PROJECT_ID=social-impact-platform-dev
FIREBASE_REGION=europe-west1
FIREBASE_DATABASE_URL=https://social-impact-platform-dev-default-rtdb.europe-west1.firebasedatabase.app
FIREBASE_STORAGE_BUCKET=social-impact-platform-dev.appspot.com

# Firebase Service Account (Base64 encoded JSON)
# Generate from Firebase Console > Project Settings > Service Accounts
FIREBASE_SERVICE_ACCOUNT_KEY=eyJhbGc...base64_encoded_service_account_json

# ============================================================================
# STRIPE PAYMENT CONFIGURATION
# ============================================================================

# Stripe API Keys (Get from Stripe Dashboard)
STRIPE_SECRET_KEY=sk_test_51234567890abcdef...
STRIPE_PUBLISHABLE_KEY=pk_test_51234567890abcdef...

# Stripe Webhook Configuration
STRIPE_WEBHOOK_SECRET=whsec_1234567890abcdef...
STRIPE_CONNECT_WEBHOOK_SECRET=whsec_connect_1234567890abcdef...

# Stripe Connect Configuration (for creator payouts)
STRIPE_CONNECT_CLIENT_ID=ca_1234567890abcdef...

# ============================================================================
# SUMSUB KYC CONFIGURATION
# ============================================================================

# Sumsub API Configuration
SUMSUB_APP_TOKEN=sbx:1234567890abcdef...
SUMSUB_SECRET_KEY=1234567890abcdefghijklmnop...
SUMSUB_BASE_URL=https://api.sumsub.com
SUMSUB_WEBHOOK_SECRET=webhook_secret_key_here

# Sumsub Level Names (configured in Sumsub dashboard)
SUMSUB_LEVEL_BASIC=basic-kyc-level
SUMSUB_LEVEL_FULL=full-kyc-level

# ============================================================================
# SENDGRID EMAIL CONFIGURATION
# ============================================================================

# SendGrid API Key
SENDGRID_API_KEY=SG.1234567890abcdef...

# Email Configuration
SENDGRID_FROM_EMAIL=noreply@socialimpact.finance
SENDGRID_FROM_NAME=Social Impact Platform
SENDGRID_REPLY_TO=support@socialimpact.finance

# SendGrid Template IDs (create these in SendGrid dashboard)
SENDGRID_TEMPLATE_WELCOME=d-1234567890abcdef
SENDGRID_TEMPLATE_KYC_APPROVED=d-2234567890abcdef
SENDGRID_TEMPLATE_KYC_REJECTED=d-3234567890abcdef
SENDGRID_TEMPLATE_PROJECT_APPROVED=d-4234567890abcdef
SENDGRID_TEMPLATE_CONTRIBUTION_CONFIRMED=d-5234567890abcdef
SENDGRID_TEMPLATE_AUDIT_ASSIGNMENT=d-6234567890abcdef
SENDGRID_TEMPLATE_MONTHLY_REPORT=d-7234567890abcdef
SENDGRID_TEMPLATE_DIGEST_DAILY=d-8234567890abcdef
SENDGRID_TEMPLATE_REFUND_PROCESSED=d-9234567890abcdef

# ============================================================================
# FRONTEND APPLICATION URLS
# ============================================================================

# Frontend Application URLs (used in emails and notifications)
FRONTEND_URL=https://socialimpact.finance
ADMIN_DASHBOARD_URL=https://admin.socialimpact.finance
API_BASE_URL=https://api.socialimpact.finance

# Deep Link Configuration
MOBILE_APP_SCHEME=socialimpact
MOBILE_APP_IOS_URL=https://apps.apple.com/app/social-impact
MOBILE_APP_ANDROID_URL=https://play.google.com/store/apps/details?id=com.socialimpact.app

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# JWT and Encryption Keys (generate strong random keys)
JWT_SECRET=super_secret_jwt_key_change_this_in_production
ENCRYPTION_KEY=32_character_encryption_key_here
WEBHOOK_SIGNATURE_SECRET=webhook_signature_verification_key

# CORS Configuration
CORS_ALLOWED_ORIGINS=https://socialimpact.finance,https://admin.socialimpact.finance
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================================================
# EXTERNAL SERVICES CONFIGURATION
# ============================================================================

# Analytics and Monitoring
GOOGLE_ANALYTICS_ID=G-1234567890
SENTRY_DSN=https://1234567890abcdef@sentry.io/1234567

# File Storage Configuration
CLOUDINARY_CLOUD_NAME=social-impact-platform
CLOUDINARY_API_KEY=123456789012345
CLOUDINARY_API_SECRET=abcdefghijklmnop

# Third-party Integrations
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/T00000000/B00000000/1234567890abcdef
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/1234567890/abcdefghijklmnop

# ============================================================================
# DATABASE AND STORAGE CONFIGURATION
# ============================================================================

# Firestore Configuration
FIRESTORE_EMULATOR_HOST=localhost:8080
FIRESTORE_PROJECT_ID=social-impact-platform-dev

# Storage Configuration
STORAGE_EMULATOR_HOST=localhost:9199
MAX_FILE_SIZE_MB=10
ALLOWED_FILE_TYPES=pdf,jpg,jpeg,png,doc,docx

# ============================================================================
# BUSINESS CONFIGURATION
# ============================================================================

# Platform Configuration
PLATFORM_NAME=Social Finance Impact Platform
PLATFORM_FEE_PERCENTAGE=2.5
PAYMENT_PROCESSING_FEE_PERCENTAGE=2.9
MIN_CONTRIBUTION_AMOUNT=500
MAX_CONTRIBUTION_AMOUNT=100000

# Interest Calculation Configuration
BASE_INTEREST_RATE=0.02
MAX_INTEREST_RATE=0.05
INTEREST_CALCULATION_FREQUENCY=daily

# Audit Configuration
AUDIT_ASSIGNMENT_TIMEOUT_HOURS=72
MAX_CONCURRENT_AUDITS=5
AUDIT_QUALITY_THRESHOLD=80

# ============================================================================
# NOTIFICATION CONFIGURATION
# ============================================================================

# Push Notification Configuration (if using FCM)
FCM_SERVER_KEY=AAAAxxxxxxx:APA91bxxxxxxx...

# Email Rate Limiting
MAX_EMAILS_PER_HOUR=1000
MAX_EMAILS_PER_DAY=10000

# Notification Preferences
DEFAULT_EMAIL_NOTIFICATIONS=true
DEFAULT_PUSH_NOTIFICATIONS=true
DEFAULT_SMS_NOTIFICATIONS=false

# ============================================================================
# DEVELOPMENT AND TESTING
# ============================================================================

# Environment Type
NODE_ENV=development
LOG_LEVEL=debug

# Testing Configuration
TEST_DATABASE_URL=http://localhost:8080
TEST_STRIPE_KEY=sk_test_123...
TEST_USER_EMAIL=test@example.com
DISABLE_AUTH_IN_TESTS=false

# Emulator Configuration
USE_EMULATORS=true
AUTH_EMULATOR_HOST=localhost:9099
FUNCTIONS_EMULATOR_HOST=localhost:5001

# ============================================================================
# MONITORING AND LOGGING
# ============================================================================

# Logging Configuration
ENABLE_REQUEST_LOGGING=true
ENABLE_ERROR_TRACKING=true
LOG_RETENTION_DAYS=90

# Performance Monitoring
ENABLE_PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD_MS=1000
HIGH_MEMORY_THRESHOLD_MB=800

# Health Check Configuration
HEALTH_CHECK_INTERVAL_MINUTES=5
HEALTH_CHECK_TIMEOUT_SECONDS=30

# ============================================================================
# SCHEDULED JOBS CONFIGURATION
# ============================================================================

# Interest Calculation
INTEREST_CALCULATION_SCHEDULE=0 2 * * *
INTEREST_CALCULATION_TIMEZONE=Europe/Paris

# Data Cleanup
DATA_CLEANUP_SCHEDULE=0 3 * * *
NOTIFICATION_RETENTION_DAYS=90
LOG_RETENTION_DAYS=30

# Report Generation
MONTHLY_REPORT_SCHEDULE=0 6 1 * *
DIGEST_EMAIL_SCHEDULE=0 8 * * *

# Metrics Synchronization
METRICS_SYNC_SCHEDULE=0 */1 * * *
TRENDING_UPDATE_SCHEDULE=0 */6 * * *

# ============================================================================
# FEATURE FLAGS
# ============================================================================

# Platform Features
ENABLE_KYC_VERIFICATION=true
ENABLE_AUDIT_SYSTEM=true
ENABLE_INTEREST_CALCULATION=true
ENABLE_AUTOMATIC_REFUNDS=true
ENABLE_TRENDING_ALGORITHM=true

# Communication Features
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_PUSH_NOTIFICATIONS=true
ENABLE_DIGEST_EMAILS=true
ENABLE_MONTHLY_REPORTS=true

# Advanced Features
ENABLE_RECOMMENDATION_ENGINE=true
ENABLE_SOCIAL_SHARING=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_A_B_TESTING=false

# ============================================================================
# COMPLIANCE AND REGULATORY
# ============================================================================

# GDPR Compliance
ENABLE_GDPR_COMPLIANCE=true
DATA_RETENTION_YEARS=7
COOKIE_CONSENT_REQUIRED=true

# Financial Compliance
ENABLE_AML_CHECKS=true
SUSPICIOUS_ACTIVITY_THRESHOLD=10000
LARGE_TRANSACTION_THRESHOLD=50000

# Audit Trail
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_RETENTION_YEARS=10
FINANCIAL_AUDIT_REQUIRED=true

# ============================================================================
# API CONFIGURATION
# ============================================================================

# API Rate Limiting
API_RATE_LIMIT_REQUESTS_PER_MINUTE=60
API_RATE_LIMIT_BURST_SIZE=10

# API Versioning
API_VERSION=v1
API_DEPRECATION_WARNING_MONTHS=6

# API Documentation
ENABLE_API_DOCS=true
API_DOCS_URL=https://docs.socialimpact.finance

# ============================================================================
# NOTES AND INSTRUCTIONS
# ============================================================================

# Important Notes:
# 1. Never commit actual API keys or secrets to version control
# 2. Use different values for development, staging, and production
# 3. Rotate API keys and secrets regularly
# 4. Use Firebase Functions config for production deployment:
#    firebase functions:config:set stripe.key="sk_live_..."
# 5. Test all configurations in development environment first
# 6. Monitor logs for any configuration-related errors
# 7. Keep this template updated when adding new features

# Production Deployment:
# 1. Copy this file to .env.production
# 2. Replace all example values with actual production values
# 3. Ensure all external services are properly configured
# 4. Test the deployment in staging environment first
# 5. Monitor the application after deployment

# Security Checklist:
# ✓ All API keys are properly secured
# ✓ Webhook secrets are configured
# ✓ CORS settings are restrictive
# ✓ Rate limiting is enabled
# ✓ Sensitive data is encrypted
# ✓ Audit logging is enabled
# ✓ Error tracking is configured