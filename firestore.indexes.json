{
  "indexes": [
    // ============================================
    // COLLECTION: users
    // ============================================

    // Index pour recherche et filtrage administrateur
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userType", "order": "ASCENDING" },
        { "fieldPath": "kyc.status", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour filtrage par statut compte et type
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "accountStatus", "order": "ASCENDING" },
        { "fieldPath": "userType", "order": "ASCENDING" },
        { "fieldPath": "stats.lastLoginAt", "order": "DESCENDING" }
      ]
    },

    // Index pour filtrage par KYC
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "kyc.status", "order": "ASCENDING" },
        { "fieldPath": "kyc.level", "order": "ASCENDING" },
        { "fieldPath": "updatedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour classements contributeurs
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userType", "order": "ASCENDING" },
        { "fieldPath": "stats.totalContributed", "order": "DESCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour classements créateurs
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userType", "order": "ASCENDING" },
        { "fieldPath": "stats.projectsCreated", "order": "DESCENDING" },
        { "fieldPath": "stats.successfulProjects", "order": "DESCENDING" }
      ]
    },

    // Index pour classements auditeurs
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userType", "order": "ASCENDING" },
        { "fieldPath": "stats.auditsCompleted", "order": "DESCENDING" },
        { "fieldPath": "stats.approvalRate", "order": "DESCENDING" }
      ]
    },

    // Index pour recherche géographique
    {
      "collectionGroup": "users",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "address.country", "order": "ASCENDING" },
        { "fieldPath": "userType", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ============================================
    // COLLECTION: projects
    // ============================================

    // Index pour searchProjects : Public + Status + Date
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "timeline.publishedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour searchProjects : Public + Category + Status + Date
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "category", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "timeline.publishedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour searchProjects : Status + Funding Progress
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "funding.percentage", "order": "DESCENDING" },
        { "fieldPath": "timeline.publishedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour searchProjects : Category + Funding Progress
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "category", "order": "ASCENDING" },
        { "fieldPath": "funding.percentage", "order": "DESCENDING" },
        { "fieldPath": "timeline.publishedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour projets par localisation
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "location.country", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "funding.percentage", "order": "DESCENDING" }
      ]
    },

    // Index pour projets par région
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "location.country", "order": "ASCENDING" },
        { "fieldPath": "location.region", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "timeline.publishedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour getProjectsByCreator : Projets d'un créateur triés
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "creator.uid", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "updatedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour trending projects (popularité)
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "analytics.views", "order": "DESCENDING" },
        { "fieldPath": "timeline.publishedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour projets par deadline
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "timeline.endDate", "order": "ASCENDING" }
      ]
    },

    // Index pour projets en review (admin)
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "moderation.status", "order": "ASCENDING" },
        { "fieldPath": "timeline.submittedAt", "order": "ASCENDING" }
      ]
    },

    // Index pour projets par objectif de financement
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "funding.goal", "order": "DESCENDING" },
        { "fieldPath": "timeline.publishedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour projets par category + country
    {
      "collectionGroup": "projects",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "category", "order": "ASCENDING" },
        { "fieldPath": "location.country", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "timeline.publishedAt", "order": "DESCENDING" }
      ]
    },

    // ============================================
    // SUB-COLLECTION: milestones
    // ============================================

    // Index pour milestones d'un projet par ordre
    {
      "collectionGroup": "milestones",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "projectId", "order": "ASCENDING" },
        { "fieldPath": "order", "order": "ASCENDING" }
      ]
    },

    // Index pour milestones par statut
    {
      "collectionGroup": "milestones",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "projectId", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "timeline.plannedEndDate", "order": "ASCENDING" }
      ]
    },

    // Index pour milestones en audit
    {
      "collectionGroup": "milestones",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "audit.auditorUid", "order": "ASCENDING" },
        { "fieldPath": "audit.deadline", "order": "ASCENDING" }
      ]
    },

    // ============================================
    // COLLECTION: contributions
    // ============================================

    // Index pour contributions par projet + statut
    {
      "collectionGroup": "contributions",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "projectId", "order": "ASCENDING" },
        { "fieldPath": "payment.status", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour contributions par utilisateur
    {
      "collectionGroup": "contributions",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "contributorUid", "order": "ASCENDING" },
        { "fieldPath": "payment.status", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour contributions par montant
    {
      "collectionGroup": "contributions",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "projectId", "order": "ASCENDING" },
        { "fieldPath": "amount.gross", "order": "DESCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour contributions confirmées par projet
    {
      "collectionGroup": "contributions",
      "queryScope": "COLLECTION_GROUP",
      "fields": [
        { "fieldPath": "projectId", "order": "ASCENDING" },
        { "fieldPath": "payment.status", "order": "ASCENDING" },
        { "fieldPath": "payment.confirmedAt", "order": "DESCENDING" }
      ]
    },

    // Index pour contributions globales (collection principale)
    {
      "collectionGroup": "contributions",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "contributorUid", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ============================================
    // COLLECTION: audits
    // ============================================

    // Index pour audits par auditeur + statut
    {
      "collectionGroup": "audits",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "auditorUid", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "deadline", "order": "ASCENDING" }
      ]
    },

    // Index pour audits par projet
    {
      "collectionGroup": "audits",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "projectId", "order": "ASCENDING" },
        { "fieldPath": "milestoneId", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour audits en attente
    {
      "collectionGroup": "audits",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "assignedAt", "order": "ASCENDING" }
      ]
    },

    // Index pour audits complétés
    {
      "collectionGroup": "audits",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "auditorUid", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "completedAt", "order": "DESCENDING" }
      ]
    },

    // ============================================
    // COLLECTION: notifications
    // ============================================

    // Index pour notifications par utilisateur non lues
    {
      "collectionGroup": "notifications",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userId", "order": "ASCENDING" },
        { "fieldPath": "read", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour notifications par type et priorité
    {
      "collectionGroup": "notifications",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userId", "order": "ASCENDING" },
        { "fieldPath": "type", "order": "ASCENDING" },
        { "fieldPath": "priority", "order": "DESCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour notifications par catégorie
    {
      "collectionGroup": "notifications",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userId", "order": "ASCENDING" },
        { "fieldPath": "category", "order": "ASCENDING" },
        { "fieldPath": "read", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ============================================
    // COLLECTION: transactions
    // ============================================

    // Index pour transactions par utilisateur
    {
      "collectionGroup": "transactions",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "fromUserId", "order": "ASCENDING" },
        { "fieldPath": "type", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour transactions par bénéficiaire
    {
      "collectionGroup": "transactions",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "toUserId", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour transactions par projet
    {
      "collectionGroup": "transactions",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "projectId", "order": "ASCENDING" },
        { "fieldPath": "type", "order": "ASCENDING" },
        { "fieldPath": "amount", "order": "DESCENDING" }
      ]
    },

    // ============================================
    // COLLECTION: reports (signalements)
    // ============================================

    // Index pour signalements par statut
    {
      "collectionGroup": "reports",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "priority", "order": "DESCENDING" },
        { "fieldPath": "createdAt", "order": "ASCENDING" }
      ]
    },

    // Index pour signalements par type
    {
      "collectionGroup": "reports",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "type", "order": "ASCENDING" },
        { "fieldPath": "status", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ============================================
    // COLLECTION: messages
    // ============================================

    // Index pour messages reçus
    {
      "collectionGroup": "messages",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "toUserId", "order": "ASCENDING" },
        { "fieldPath": "read", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // Index pour messages envoyés
    {
      "collectionGroup": "messages",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "fromUserId", "order": "ASCENDING" },
        { "fieldPath": "createdAt", "order": "DESCENDING" }
      ]
    },

    // ============================================
    // COLLECTION: sessions
    // ============================================

    // Index pour sessions actives
    {
      "collectionGroup": "sessions",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "userId", "order": "ASCENDING" },
        { "fieldPath": "active", "order": "ASCENDING" },
        { "fieldPath": "lastActivityAt", "order": "DESCENDING" }
      ]
    },

    // Index pour nettoyage des sessions expirées
    {
      "collectionGroup": "sessions",
      "queryScope": "COLLECTION",
      "fields": [
        { "fieldPath": "active", "order": "ASCENDING" },
        { "fieldPath": "expiresAt", "order": "ASCENDING" }
      ]
    }
  ],
  "fieldOverrides": []
}
